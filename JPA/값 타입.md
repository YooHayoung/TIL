# 값 타입

## JPA의 데이터 타입
* 엔티티 타입
	* @Entity
	* 데이터가 변해도 식별자로 지속 추적 가능
* 값 타입
	* `int`, `Integer`, `String` 등 단순히 **값으로 사용**하는 자바 기본타입 or 객체
	* 식별자가 없고 값만 있으므로 변경시 추적 불가

## 값 타입의 분류
* 기본값 타입
	* 자바 기본 타입 `int`, `double` 등
	* 래퍼 클래스 `Integer`, `Long` 등
	* `String`
* 임베디드 타입
	* `embedded type`, 복합 값 타입
* 컬렉션 타입
	* `list` 등


## 임베디드 타입
* **직접 정의한 새로운 값 타입**
* 기본 값 타입(int, String 등)을 모아서 만든다.
* **복합 값 타입**이라고도 함
* 참조를 저장 X -> 해당 임베디드 타입 객체의 속성을 저장한다.
* `@Embeddeable` : 값 타입 정의시 사용
* `@Embedded` : 값 타입 사용시 사용

> `city`, `street`, `zipcode` 라는 속성을 갖는 `Address` 라는 클래스를 만들어 임베디드 타입으로 지정하면, `Entity` 클래스에서 `Address` 객체를 **값 타입으로 사용**할 수 있다.  

### 임베디드 타입 장점
* **재사용성**
* **높은 응집도**
* 해당 값 타입만 사용하는 의미있는 메소드 생성 가능
* 값 타입을 소유한 엔티티에 생명주기를 의존한다. 이는 임베디드 뿐만 아니라 모든 값 타입에 해당.

### 주의!
* 임베디드 타입은 값 타입 이지만 객체이다.
* 이를 여러 엔티티에서 공유하면 위험하다.
* 공유해서 다른 곳에서 내용을 변경하게 되면 side effect 발생.
* 객체 타입을 수정할 수 없게 만들어 부작용을 원천 차단하자.
* **값 타입**은 생성 시점 이후 절대 값을 변경할 수 없는 **불변 객체**로 설계해야 한다.
* 임베디드 타입 같은 **값 타입의 객체**는 **공유하지 말고 값을 복사해서 사용**하자.


## 정리
* 엔티티 타입은
	* 식별자 존재
	* 생명주기 관리
	* 공유 가능
* 값 타입은
	* 식별자가 없다
	* 생명주기를 엔티티에 의존한다
	* 공유하지 않아야 안전하다. 복사해서 사용하자
	* **불변 객체**로 만들어야 안전하다.

**식별자가 필요하고, 지속해서 값을 추적, 변경해야 하면, 그것은 값 타입이 아니라 엔티티 타입이다.**


#JPA/값 타입#
- - - -

해당 내용은 김영한님의 강의를 듣고 정리한 내용입니다.